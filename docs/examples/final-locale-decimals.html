<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Locale Decimal Parsing – Dot vs Comma</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" />
        <link rel="stylesheet" href="https://cdn.datatables.net/1.13.8/css/jquery.dataTables.min.css" />
        <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.5.0/css/responsive.dataTables.min.css" />
        <style>
            body {
                padding: 2rem
            }

            .demo {
                margin-bottom: 2rem
            }
        </style>
        <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
        <script src="https://cdn.datatables.net/1.13.8/js/jquery.dataTables.min.js"></script>
        <script src="https://cdn.datatables.net/responsive/2.5.0/js/dataTables.responsive.min.js"></script>
        <!-- Use local dist so we test the patched parser -->
        <script src="../../dist/datatables.columnHighlighter.js"></script>
    </head>

    <body>
        <h1 class="h4 mb-4">Conditional Formatting with Dot and Comma Decimals</h1>
        <p class="text-muted">Both tables use the same numeric rules. Left uses dot decimals (US style). Right uses comma decimals (EU style). Highlights should match.</p>

        <div class="row demo">
            <div class="col-md-6">
                <h2 class="h6">Dot decimals</h2>
                <table id="dt-dot" class="table table-striped nowrap" style="width:100%">
                    <thead>
                        <tr>
                            <th>Item</th>
                            <th>Value</th>
                            <th>Delta</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>A</td>
                            <td>0.95</td>
                            <td>-0.40</td>
                        </tr>
                        <tr>
                            <td>B</td>
                            <td>1.25</td>
                            <td>0.10</td>
                        </tr>
                        <tr>
                            <td>C</td>
                            <td>2.00</td>
                            <td>0.50</td>
                        </tr>
                        <tr>
                            <td>D</td>
                            <td>3.14</td>
                            <td>-1.00</td>
                        </tr>
                        <tr>
                            <td>E</td>
                            <td>4.20</td>
                            <td>0.00</td>
                        </tr>
                        <tr>
                            <td>F</td>
                            <td>1.500</td>
                            <td>-0.05</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="col-md-6">
                <h2 class="h6">Comma decimals</h2>
                <table id="dt-comma" class="table table-striped nowrap" style="width:100%">
                    <thead>
                        <tr>
                            <th>Item</th>
                            <th>Value</th>
                            <th>Delta</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>A</td>
                            <td>0,95</td>
                            <td>-0,40</td>
                        </tr>
                        <tr>
                            <td>B</td>
                            <td>1,25</td>
                            <td>0,10</td>
                        </tr>
                        <tr>
                            <td>C</td>
                            <td>2,00</td>
                            <td>0,50</td>
                        </tr>
                        <tr>
                            <td>D</td>
                            <td>3,14</td>
                            <td>-1,00</td>
                        </tr>
                        <tr>
                            <td>E</td>
                            <td>4,20</td>
                            <td>0,00</td>
                        </tr>
                        <tr>
                            <td>F</td>
                            <td>1 500,00</td>
                            <td>-0,05</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <script>
            function buildRules() {
                return [
                    // Value >= 2.0 -> green text
                    {
                        conditionsContainer: [{ logic: 'AND', conditions: [{ columnName: 'Value', operator: 'ge', type: 'number', value: 2.0 }] }],
                        targets: [{ column: 'Value', textColor: '#198754' }]
                    },
                    // 1.0 <= Value <= 1.5 -> amber background
                    {
                        conditionsContainer: [{ logic: 'AND', conditions: [{ columnName: 'Value', operator: 'betweenInclusive', type: 'number', value: [1.0, 1.5] }] }],
                        targets: [{ column: 'Value', backgroundColor: '#fff3cd', textColor: '#664d03' }]
                    },
                    // Value IN (3.14, 4.2) -> primary blue text
                    {
                        conditionsContainer: [{ logic: 'AND', conditions: [{ columnName: 'Value', operator: 'in', type: 'number', value: [3.14, 4.2] }] }],
                        targets: [{ column: 'Value', textColor: '#084298' }]
                    },
                    // Delta < 0 -> red text
                    {
                        conditionsContainer: [{ logic: 'AND', conditions: [{ columnName: 'Delta', operator: 'lt', type: 'number', value: 0 }] }],
                        targets: [{ column: 'Delta', textColor: '#dc3545' }]
                    },
                ];
            }
            $(function () {
                $('#dt-dot').DataTable({ responsive: true, columnHighlighter: { rules: buildRules() } });
                $('#dt-comma').DataTable({ responsive: true, columnHighlighter: { rules: buildRules() } });
            });
        </script>
    </body>

</html>