<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width,initial-scale=1" />
        <title>Toggle Responsive/ScrollX (Preserves State)</title>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" />
        <link rel="stylesheet" href="https://cdn.datatables.net/1.13.8/css/jquery.dataTables.min.css" />
        <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.5.0/css/responsive.dataTables.min.css" />
        <link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.4.2/css/buttons.dataTables.min.css" />
        <style>
            body { padding: 2rem }
        </style>
        <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
        <script src="https://cdn.datatables.net/1.13.8/js/jquery.dataTables.min.js"></script>
        <script src="https://cdn.datatables.net/responsive/2.5.0/js/dataTables.responsive.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/2.4.2/js/dataTables.buttons.min.js"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.html5.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.print.min.js"></script>
        <script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.colVis.min.js"></script>
        <script src="../../dist/datatables.columnHighlighter.js"></script>
        <script src="../../dist/datatables.toggleView.js"></script>
        <script src="../../dist/buttons.toggleView.js"></script>
    </head>

    <body>
        <h1 class="h4 mb-3">Toggle Responsive/ScrollX without losing config</h1>
        
        <table id="dt" class="table table-striped nowrap" style="width:100%">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Rule Checks Fail</th>
                    <th>Rule Checks Pass</th>
                    <th>Rule Checks Skip</th>
                    <th>Tests Fail</th>
                    <th>Tests Pass</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>A</td>
                    <td>1</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>1</td>
                </tr>
                <tr>
                    <td>B</td>
                    <td>0</td>
                    <td>1</td>
                    <td>0</td>
                    <td>0</td>
                    <td>1</td>
                </tr>
                <tr>
                    <td>C</td>
                    <td>0</td>
                    <td>0</td>
                    <td>1</td>
                    <td>1</td>
                    <td>0</td>
                </tr>
                <tr>
                    <td>D</td>
                    <td>3</td>
                    <td>2</td>
                    <td>0</td>
                    <td>0</td>
                    <td>4</td>
                </tr>
            </tbody>
        </table>
        <script>
            $(function () {
                $('#dt').DataTable({
                    dom: 'Bfrtip',
                    stateSave: true,
                    order: [[5, 'desc']],
                    pageLength: 10,
                    lengthMenu: [[5, 10, 20, 50, -1], [5, 10, 20, 50, 'All']],
                    responsive: true,
                    buttons: ['copyHtml5','csvHtml5','excelHtml5','colvis','print','toggleView'],
                    columnHighlighter: {
                        rules: [
                            { conditionsContainer: [{ logic: 'AND', conditions: [{ columnName: 'Rule Checks Fail', operator: 'gt', type: 'number', value: 0 }] }], targets: [{ column: 'Rule Checks Fail', textColor: '#dc143c' }] },
                            { conditionsContainer: [{ logic: 'AND', conditions: [{ columnName: 'Rule Checks Pass', operator: 'gt', type: 'number', value: 0 }] }], targets: [{ column: 'Rule Checks Pass', textColor: '#2e8b57' }] },
                            { conditionsContainer: [{ logic: 'AND', conditions: [{ columnName: 'Rule Checks Skip', operator: 'gt', type: 'number', value: 0 }] }], targets: [{ column: 'Rule Checks Skip', textColor: '#1e90ff' }] },
                            { conditionsContainer: [{ logic: 'AND', conditions: [{ columnName: 'Tests Fail', operator: 'gt', type: 'number', value: 0 }] }], targets: [{ column: 'Tests Fail', textColor: '#dc143c' }] },
                            { conditionsContainer: [{ logic: 'AND', conditions: [{ columnName: 'Tests Pass', operator: 'gt', type: 'number', value: 0 }] }], targets: [{ column: 'Tests Pass', textColor: '#2e8b57' }] }
                        ]
                    }
                });
            });
        </script>
    </body>

</html>
